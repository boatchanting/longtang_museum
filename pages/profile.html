<!-- pages/profile.html -->
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>我的信息 - 上海西王花园弄堂博物馆</title>

<!-- 复用全站变量与基础组件 -->
<link rel="stylesheet" href="../styles/base.css">
<link rel="stylesheet" href="../styles/main.css">
<!-- 主题占位，供 theme.js 动态写入 -->
<style id="theme-style"></style>
<style>
/* 我的信息专属样式 */
.user-profile{
  padding:1.5rem;
  text-align:center;
}

.avatar{
  width:100px;
  height:100px;
  margin:0 auto 1rem;
  border-radius:50%;
  background:url('../img/default-avatar.jpg') center/cover;
  border:3px solid var(--primary);
}

.username{
  font-size:1.2rem;
  font-weight:bold;
  margin-bottom:0.5rem;
}

.info-grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:0.8rem;
  padding:0 0.5rem 1rem;  /* 减小左右内边距 */
}


.info-card{
  background:var(--card);
  padding:1rem;
  border-radius:20px;
  text-align:center;
  color:var(--primary);
  font-weight:500;
  display:flex;
  align-items:center;
  justify-content:center;
  gap:0.5rem;
}

.settings-section{
  padding:0 1rem;
}

.section-header{
  font-weight:bold;
  margin:1rem 0 0.5rem;
  color:var(--text);
}

.setting-item{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding:0.8rem 1rem;
  background:var(--card);
  margin-bottom:0.5rem;
  border-radius:16px;
}

.switch{
  width:36px;
  height:20px;
  background:#ccc;
  border-radius:10px;
  position:relative;
  transition:background 0.3s;
}

.switch::after{
  content:'';
  position:absolute;
  top:2px;
  left:2px;
  width:16px;
  height:16px;
  background:#fff;
  border-radius:50%;
  transition:left 0.3s;
}

.switch.active{
  background:var(--primary);
}
.switch.active::after{
  left:18px;
}

/* ---- 主题按钮组 ---- */
.theme-buttons{
  display:flex;
  gap:0.45rem;
}

.theme-btn{
  width:32px;              /* 圆形按钮直径 */
  height:32px;
  line-height:32px;
  border:none;
  border-radius:50%;
  font-size:1.1rem;
  background:var(--card);
  color:var(--text);
  cursor:pointer;
  transition:transform .2s, background .2s;
}

.theme-btn:active{
  transform:scale(.9);
}
.theme-btn.active{
  outline:2px solid var(--primary);     /* 当前选中状态高亮 */
}
</style>
</head>

<body>
  <header class="card">
    <h1>我的信息</h1>
  </header>

  <main>
    <div class="user-profile">
      <div class="avatar" style="background:url('https://picsum.photos/400/500?random=1') center/cover no-repeat;"></div>
      <div class="username">弄晚抚堂</div>
      
      <div class="info-grid">
        <div class="info-card">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
            <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
          </svg>
          已参观 6次
        </div>
        <div class="info-card">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
            <path d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
          </svg>
          收藏 8个展品
        </div>
      </div>
    </div>

    <div class="settings-section">
      <div class="section-header">账户设置</div>
      
      <div class="setting-item">
        <div>昵称</div>
        <div>弄晚抚堂 ▸</div>
      </div>

      <div class="setting-item">
        <div>手机号</div>
        <div>123****5678 ▸</div>
      </div>

      <div class="setting-item">
        <div>语言</div>
        <div>简体中文 ▸</div>
      </div>
    </div>

    <div class="settings-section">
      <div class="section-header">应用设置</div>
      
      <div class="setting-item">
        <div>主题</div>
        <div class="theme-buttons" id="theme-buttons">
          <button class="theme-btn" data-theme="light" aria-label="浅色">☀️</button>
          <button class="theme-btn" data-theme="auto"  aria-label="跟随系统">🌓</button>
          <button class="theme-btn" data-theme="dark"  aria-label="深色">🌙</button>
        </div>
      </div>

      <div class="setting-item">
        <div>清除缓存</div>
        <div>10.5MB ▸</div>
      </div>

    <div class="setting-item logout-btn">
    <div class="setting-label">退出登录</div>
    <svg class="logout-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M17 7L21 12L17 17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M21 12H9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
      <path d="M9 21H5C3.89543 21 3 20.1046 3 19V5C3 3.89543 3.89543 3 5 3H9" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
  </div>
    </div>
  </main>

  <!-- ======== 底部导航 ======== -->
  <footer class="bottom-nav card">
    <a class="nav-item" href="../index.html">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
      </svg><div>主页</div>
    </a>

    <a class="nav-item" href="artifact.html">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
      </svg><div>馆藏文物库</div>
    </a>

    <a class="nav-item red-story" href="red_stories/index.html">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
        <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
      </svg>
      <div>红色故事</div>
    </a>

    <a class="nav-item" href="community.html">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
      </svg><div>社区</div>
    </a>

    <a class="nav-item active" href="profile.html">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
      </svg><div>个人中心</div>
    </a>
  </footer>
<!-- 公共主题脚本 -->
<script src="../scripts/theme.js" defer></script>
<script>
document.addEventListener('DOMContentLoaded', () => {
  const btns        = Array.from(document.querySelectorAll('#theme-buttons .theme-btn'));
  const prefersDark = matchMedia('(prefers-color-scheme:dark)');

  /* ---------- 公共：根据 theme 更新按钮高亮 ---------- */
  function highlight(theme) {
    btns.forEach(b => b.classList.toggle('active', b.dataset.theme === theme));
  }

  /* ---------- 初始化 ---------- */
  const saved = localStorage.getItem('museumTheme') || 'auto';
  highlight(saved);

  /* ---------- 点击事件：切换主题 ---------- */
  btns.forEach(btn => {
    btn.addEventListener('click', () => {
      const next = btn.dataset.theme;        // 读 data-theme
      window.setTheme(next);                 // 调用 theme.js
      highlight(next);
    });
  });

  /* ---------- 系统偏好改变时（仅当用户选 auto） ---------- */
  prefersDark.addEventListener('change', () => {
    if ((localStorage.getItem('museumTheme') || 'auto') === 'auto') {
      highlight('auto');                     // UI 跟随系统
    }
  });
});
</script>


</body>
</html>