<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>发布动态</title>
  <!-- 主题配色变量 -->
  <style id="theme-style">
    :root {
      --grad-start: #f6e7cd;
      --grad-end:   #dfc295;
      --primary:    #b07a43;
      --text:       #4d3a13;
      --card:       #fff8ef;
      --card-dark:  #4d402d;
    }
  </style>
  <style>
    @font-face { font-family: "Segoe UI"; src: local("Segoe UI"); }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    html, body {
      height: 100%;
      font-family: "Segoe UI","PingFang SC","Noto Sans",sans-serif;
      background: linear-gradient(to top, var(--grad-end), var(--grad-start));
      color: var(--text);
      display: flex; flex-direction: column;
    }
    .card {
      background: var(--card);
      border-radius: 24px;
      box-shadow: 0 3px 10px rgba(0,0,0,.08);
    }
    header {
      padding: 1rem;
      text-align: center;
      background: var(--card);
      border-radius: 0 0 24px 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,.06);
    }
    header h1 { font-size: 1.3rem; font-weight: 700; }
    main {
      flex: 1;
      overflow-y: auto;
      padding: 1rem;
    }
    /* 上传区域 */
    #upload-area {
      padding: 1rem;
      min-height: 120px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    #upload-area label {
      width: 30%; aspect-ratio: 1;
      display: flex; align-items: center; justify-content: center;
      border: 2px dashed var(--primary);
      border-radius: 12px;
      cursor: pointer;
      position: relative;
    }
    #upload-area label input {
      position: absolute; inset: 0;
      width: 100%; height: 100%;
      opacity: 0; cursor: pointer;
    }
    #upload-area label span {
      font-size: 2rem; color: var(--primary);
      pointer-events: none;
    }
    #upload-area img {
      width: 30%; aspect-ratio: 1;
      object-fit: cover; border-radius: 12px;
    }
    input[type="text"], textarea {
      width: 100%;
      margin: 1rem 0;
      padding: .6rem;
      border: none;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,.05);
      font-size: 1rem;
      resize: none;
    }
    textarea { height: 6rem; }
    button.publish-btn {
      width: calc(100% - 2rem);
      margin: 1rem;
      height: 2.8rem;
      background: var(--primary);
      color: #fff;
      border: none;
      border-radius: 16px;
      font-size: 1rem;
      cursor: pointer;
      box-shadow: 0 3px 8px rgba(0,0,0,.1);
    }
    /* 底部导航 */
    .bottom-nav {
      position: fixed; left: 0; bottom: 0;
      width: 100%; height: 4.2rem;
      background: var(--card);
      border-radius: 24px 24px 0 0;
      box-shadow: 0 -3px 10px rgba(0,0,0,.08);
      display: flex; justify-content: space-around; align-items: center;
    }
    .nav-item {
      flex: 1;
      text-align: center;
      text-decoration: none;
      color: var(--primary);
      font-size: .8rem;
    }
    .nav-item.active { color: var(--text); }
    .nav-item .icon {
      width: 1.6rem; height: 1.6rem;
      margin: 0 auto .1rem;
      display: block;
    }
  </style>
</head>
<body>

  <header class="card">
    <h1>发布动态</h1>
  </header>

  <main>
    <div id="upload-area">
      <label>
        <input type="file" accept="image/*" multiple onchange="preview(this)">
        <span>＋</span>
      </label>
    </div>
    <input id="title" type="text" placeholder="标题">
    <textarea id="content" placeholder="描述"></textarea>
  </main>

  <button class="publish-btn" onclick="submitPost()">发布</button>

  <footer class="bottom-nav card">
    <a class="nav-item" href="../index.html">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
      </svg>
      <div>主页</div>
    </a>
    <a class="nav-item" href="#">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M5 8h14M5 8a2 2 0 110-4h14a2 2 0 110 4M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8m-9 4h4"/>
      </svg>
      <div>馆藏</div>
    </a>
    <a class="nav-item active" href="community.html">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
      </svg>
      <div>社区</div>
    </a>
    <a class="nav-item" href="#">
      <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
      </svg>
      <div>我的</div>
    </a>
  </footer>

  <script>
    // 预览图片 (最多 9 张)
    const uploadArea = document.getElementById('upload-area');
    let files = [];
    function preview(input) {
      const selected = Array.from(input.files);
      selected.slice(0, 9 - files.length).forEach(f => {
        files.push(f);
        const url = URL.createObjectURL(f);
        const img = document.createElement('img');
        img.src = url;
        uploadArea.appendChild(img);
      });
    }
    // 发布动作（示意）
    function submitPost() {
      // TODO: 将 files, title, content 提交到后端
      alert('发布成功！');
      window.location.href = 'community.html';
    }
  </script>

  <script>
    // 主题切换工具（与主页面相同）
    (function(){
      const style = document.getElementById('theme-style');
      const light = `
        --grad-start:#f6e7cd;
        --grad-end:#dfc295;
        --primary:#b07a43;
        --text:#4d3a13;
        --card:#fff8ef;
      `;
      const dark = `
        --grad-start:#3f3425;
        --grad-end:#241e14;
        --primary:#e0b67a;
        --text:#f5f0ea;
        --card:#4d402d;
      `;
      const mq = matchMedia('(prefers-color-scheme:dark)');
      function apply(mode){
        style.textContent = ':root{' +
          (mode==='dark'   ? dark :
           mode==='light'  ? light :
           (mq.matches ? dark : light)
          ) +
        '}';
      }
      const saved = localStorage.getItem('museumTheme') || 'auto';
      apply(saved);
      mq.addEventListener('change',()=>{
        if ((localStorage.getItem('museumTheme')||'auto')==='auto') apply('auto');
      });
      window.setTheme = function(mode){
        localStorage.setItem('museumTheme', mode);
        apply(mode);
      };
    })();
  </script>

</body>
</html>
